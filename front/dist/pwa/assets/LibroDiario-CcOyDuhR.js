import{j as W,aw as H,k as F,ax as K,l as R,f,ay as J,ad as Z,_ as X,c as _,o as d,w as n,a,Q as A,e as y,b as t,an as V,at as $,a1 as x,am as v,t as i,a2 as c,Z as b,a3 as O,a4 as S,aq as ee,h as w,az as I,av as j,W as B}from"./index-B1M2WGxh.js";import{Q as N}from"./QSelect-C01yy4JV.js";import{Q}from"./format-CRQluapV.js";import{Q as T}from"./QMarkupTable-BEQN_oLk.js";import{Q as te}from"./QInnerLoading-CVCXNIvu.js";import{Q as oe}from"./QBtnGroup-DfLMOJNv.js";import{Q as se}from"./QPage-aAFzUoSK.js";import{C as U}from"./ClosePopup-JkgwC24O.js";import{h as q}from"./moment-C5S46NFB.js";import{s as le}from"./index-By2EPsF8.js";import"./QMenu-DOvEFyt3.js";import"./selection-ZFvsNpKj.js";const M=W({name:"QBtnToggle",props:{...H,modelValue:{required:!0},options:{type:Array,required:!0,validator:s=>s.every(e=>("label"in e||"icon"in e||"slot"in e)&&"value"in e)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(s,{slots:e,emit:u}){const E=F(()=>s.options.find(g=>g.value===s.modelValue)!==void 0),l=F(()=>({type:"hidden",name:s.name,value:s.modelValue})),r=J(l),o=F(()=>K(s)),C=F(()=>({rounded:s.rounded,dense:s.dense,...o.value})),G=F(()=>s.options.map((g,p)=>{const{attrs:D,value:k,slot:P,...m}=g;return{slot:P,props:{key:p,"aria-pressed":k===s.modelValue?"true":"false",...D,...m,...C.value,disable:s.disable===!0||m.disable===!0,color:k===s.modelValue?h(m,"toggleColor"):h(m,"color"),textColor:k===s.modelValue?h(m,"toggleTextColor"):h(m,"textColor"),noCaps:h(m,"noCaps")===!0,noWrap:h(m,"noWrap")===!0,size:h(m,"size"),padding:h(m,"padding"),ripple:h(m,"ripple"),stack:h(m,"stack")===!0,stretch:h(m,"stretch")===!0,onClick(L){z(k,g,L)}}}}));function z(g,p,D){s.readonly!==!0&&(s.modelValue===g?s.clearable===!0&&(u("update:modelValue",null,null),u("clear")):u("update:modelValue",g,p),u("click",D))}function h(g,p){return g[p]===void 0?s[p]:g[p]}function Y(){const g=G.value.map(p=>R(f,p.props,p.slot!==void 0?e[p.slot]:void 0));return s.name!==void 0&&s.disable!==!0&&E.value===!0&&r(g,"push"),Z(e.default,g)}return()=>R(oe,{class:"q-btn-toggle",...o.value,rounded:s.rounded,stretch:s.stretch,glossy:s.glossy,spread:s.spread},Y)}}),ae={name:"LibroDiarioSimple",data(){return{fecha:q().format("YYYY-MM-DD"),openingAmount:0,ingresos:{ordenes:{total:0,items:[]},pagos_ordenes:{total:0,items:[]},pagos_prestamos:{total:0,items:[]},otros:{total:0,items:[]}},egresos:{prestamos:{total:0,items:[]},otros:{total:0,items:[]}},totalIngresos:0,totalEgresos:0,totalCaja:0,usuarios:[],usuario:"",loading:!1,loadingSave:!1,dlgIngreso:!1,ingresoForm:{fecha:"",descripcion:"",metodo:"EFECTIVO",monto:null,nota:""},dlgEgreso:!1,egresoForm:{fecha:"",descripcion:"",metodo:"EFECTIVO",monto:null,nota:""},dlgDetalle:!1,detalleContext:{tipo:"ingresos",metodo:"EFECTIVO"}}},computed:{ingresosFlat(){const s=(this.ingresos.ordenes.items||[]).map(l=>({...l,fuente:"ORDEN",key:`o-${l.id}`})),e=(this.ingresos.pagos_ordenes.items||[]).map(l=>({...l,fuente:"PAGO ORDEN",key:`po-${l.id}`})),u=(this.ingresos.pagos_prestamos.items||[]).map(l=>({...l,fuente:"PAGO PRÉSTAMO",key:`pp-${l.id}`})),E=(this.ingresos.otros.items||[]).map(l=>({...l,fuente:"INGRESO",key:`in-${l.id}`}));return[...s,...e,...u,...E]},egresosFlat(){const s=(this.egresos.prestamos.items||[]).map(u=>({...u,fuente:"PRÉSTAMO OTORGADO",key:`pr-${u.id}`})),e=(this.egresos.otros.items||[]).map(u=>({...u,fuente:"EGRESO",key:`ot-${u.id}`}));return[...s,...e]},detalleFiltrado(){return(this.detalleContext.tipo==="ingresos"?this.ingresosFlat:this.egresosFlat).filter(e=>(e.metodo||"EFECTIVO")===this.detalleContext.metodo&&(e.estado??"Activo")==="Activo")}},mounted(){this.egresoForm.fecha=this.fecha,this.ingresoForm.fecha=this.fecha,this.fetchUsuarios(),this.fetchDiario()},methods:{store:le,currency(s){return`${Number(s||0).toFixed(2)} Bs.`},async fetchUsuarios(){try{const{data:s}=await this.$axios.get("users");this.usuarios=s||[]}catch{this.usuarios=[]}},onChangeFecha(){this.egresoForm.fecha=this.fecha,this.ingresoForm.fecha=this.fecha,this.fetchDiario()},async fetchDiario(){this.loading=!0;try{const{data:s}=await this.$axios.get("daily-cash",{params:{date:this.fecha,usuario:this.usuario,metodo_pago:this.ingresoForm.metodo}});this.openingAmount=Number(s.daily_cash?.opening_amount||0),this.openingAmount||await this.tryPreloadYesterday(),this.ingresos={ordenes:s.ingresos?.ordenes||{total:0,items:[]},pagos_ordenes:s.ingresos?.pagos_ordenes||{total:0,items:[]},pagos_prestamos:s.ingresos?.pagos_prestamos||{total:0,items:[]},otros:s.ingresos?.otros||{total:0,items:[]}},this.egresos={prestamos:s.egresos?.prestamos||{total:0,items:[]},otros:s.egresos?.otros||{total:0,items:[]}},this.totalIngresos=Number(s.total_ingresos||0),this.totalEgresos=Number(s.total_egresos||0),this.totalCaja=Number(s.total_caja||this.totalIngresos-this.totalEgresos)}catch(s){this.$alert?.error?.(s.response?.data?.message||"Error al cargar el libro diario")}finally{this.loading=!1}},async tryPreloadYesterday(){try{const s=q(this.fecha).subtract(1,"day").format("YYYY-MM-DD"),{data:e}=await this.$axios.get("daily-cash",{params:{date:s}}),u=Number(e.daily_cash?.opening_amount||0);u>0&&(this.openingAmount=u)}catch{}},async guardarCaja(){this.loadingSave=!0;try{await this.$axios.post("daily-cash",{date:this.fecha,opening_amount:Number(this.openingAmount||0)}),this.$alert?.success?.("Caja inicial guardada"),this.fetchDiario()}catch(s){this.$alert?.error?.(s.response?.data?.message||"Error al guardar caja")}finally{this.loadingSave=!1}},openIngresoDialog(){this.ingresoForm={fecha:this.fecha,descripcion:"",metodo:"EFECTIVO",monto:null,nota:""},this.dlgIngreso=!0},async guardarIngreso(){try{this.loadingSave=!0,await this.$axios.post("ingresos",this.ingresoForm),this.$alert?.success?.("Ingreso registrado"),this.dlgIngreso=!1,this.fetchDiario()}catch(s){this.$alert?.error?.(s.response?.data?.message||"Error al registrar ingreso")}finally{this.loadingSave=!1}},openEgresoDialog(){this.egresoForm={fecha:this.fecha,descripcion:"",metodo:"EFECTIVO",monto:null,nota:""},this.dlgEgreso=!0},async guardarEgreso(){try{this.loadingSave=!0,await this.$axios.post("egresos",this.egresoForm),this.$alert?.success?.("Egreso registrado"),this.dlgEgreso=!1,this.fetchDiario()}catch(s){this.$alert?.error?.(s.response?.data?.message||"Error al registrar egreso")}finally{this.loadingSave=!1}},anularIngreso(s){this.$q.dialog({title:"Confirmar",message:"¿Seguro que deseas anular este ingreso?",cancel:!0,persistent:!0}).onOk(async()=>{try{this.loading=!0,await this.$axios.post(`ingresos/${s}/anular`),this.$alert?.success?.("Ingreso anulado"),this.fetchDiario()}catch(e){this.$alert?.error?.(e.response?.data?.message||"No se pudo anular")}finally{this.loading=!1}})},async anularEgreso(s){this.$q.dialog({title:"Confirmar",message:"¿Seguro que deseas anular este egreso?",cancel:!0,persistent:!0}).onOk(async()=>{try{this.loading=!0,await this.$axios.post(`egresos/${s}/anular`),this.$alert?.success?.("Egreso anulado"),this.fetchDiario()}catch(e){this.$alert?.error?.(e.response?.data?.message||"No se pudo anular")}finally{this.loading=!1}})},openDetalle(s,e){this.detalleContext={tipo:s,metodo:e},this.dlgDetalle=!0}}},re={class:"col-12 col-md-2"},ne={class:"col-12 col-md-2"},ie={class:"col-12 col-md-2"},de={class:"col-12 col-md-2"},ue={class:"col-12 col-md-2"},ge={class:"col-12 col-md-2 flex items-center justify-end"},me={class:"col-12 col-md-3"},ce={class:"text-h6"},fe={class:"col-12 col-md-3"},he={class:"text-h6"},pe={class:"col-12 col-md-3"},ye={class:"text-h6"},xe={class:"col-12 col-md-3 flex items-center justify-end"},ve={class:"row q-col-gutter-md"},Ve={class:"col-12 col-md-6"},be={class:"row items-center q-mb-xs"},Ce={class:"col-auto text-weight-medium"},Fe={class:"bg-green-2"},Ee={key:0,class:"text-right"},ke={class:"text-right"},_e={class:"text-left"},Ae={class:"text-left"},Ie={class:"text-left"},De={class:"text-right"},Oe={class:"text-left"},Se={class:"text-left"},we={class:"text-left"},Be={class:"text-left"},Qe={key:0,class:"text-right"},Te={key:0},Ue={class:"col-12 col-md-6"},Re={class:"row items-center q-mb-xs"},je={class:"col-auto text-weight-medium"},Ne={class:"bg-red-2"},qe={key:0,class:"text-right"},Me={class:"text-left"},Ge={class:"text-left"},ze={class:"text-right"},Ye={class:"text-left"},Pe={class:"text-left"},Le={class:"text-left"},We={class:"text-left"},He={key:0,class:"text-right"},Ke={key:0},Je={class:"col-12 col-md-6"},Ze={class:"col-12 col-md-4"},Xe={class:"col-12 col-md-2 flex justify-end"},$e={class:"text-left"},et={class:"text-right"},tt={class:"text-left"},ot={class:"text-left"},st={class:"text-left"},lt={key:0};function at(s,e,u,E,l,r){return d(),_(se,{class:"q-pa-sm bg-grey-2"},{default:n(()=>[a(A,{flat:"",bordered:""},{default:n(()=>[a(y,{class:"row items-center q-col-gutter-sm"},{default:n(()=>[t("div",re,[a(V,{type:"date",modelValue:l.fecha,"onUpdate:modelValue":[e[0]||(e[0]=o=>l.fecha=o),r.onChangeFecha],label:"Fecha",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),t("div",ne,[a(V,{modelValue:l.openingAmount,"onUpdate:modelValue":e[1]||(e[1]=o=>l.openingAmount=o),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",dense:"",outlined:"",label:"Caja inicial (Bs.)",onKeyup:$(r.guardarCaja,["enter"])},null,8,["modelValue","onKeyup"])]),t("div",ie,[a(f,{size:"12px",dense:"",color:"primary",icon:"save",label:"Guardar caja","no-caps":"",loading:l.loadingSave,onClick:r.guardarCaja},null,8,["loading","onClick"])]),t("div",de,[s.$store.user?.role==="Administrador"?(d(),_(N,{key:0,modelValue:l.usuario,"onUpdate:modelValue":e[2]||(e[2]=o=>l.usuario=o),options:l.usuarios.map(o=>o.username),label:"Usuario",dense:"",outlined:"",clearable:""},null,8,["modelValue","options"])):x("",!0)]),t("div",ue,[a(N,{modelValue:l.ingresoForm.metodo,"onUpdate:modelValue":e[3]||(e[3]=o=>l.ingresoForm.metodo=o),options:["EFECTIVO","QR"],label:"Método pago",dense:"",outlined:"",clearable:""},null,8,["modelValue"])]),t("div",ge,[a(f,{size:"12px",dense:"",color:"grey",flat:"",icon:"refresh",label:"Actualizar","no-caps":"",loading:l.loading,onClick:r.fetchDiario},null,8,["loading","onClick"]),a(v,{vertical:"",class:"q-mx-sm"}),a(f,{size:"12px",dense:"",color:"positive",icon:"add_circle",label:"Registrar ingreso","no-caps":"",class:"q-mr-sm",onClick:r.openIngresoDialog},null,8,["onClick"]),a(f,{size:"12px",dense:"",color:"negative",icon:"remove_circle",label:"Registrar egreso","no-caps":"",onClick:r.openEgresoDialog},null,8,["onClick"])])]),_:1}),a(v),a(y,{class:"row q-col-gutter-sm"},{default:n(()=>[t("div",me,[e[20]||(e[20]=t("div",{class:"text-caption text-grey-7"},"TOTAL INGRESOS (incluye caja)",-1)),t("div",ce,i(r.currency(l.totalIngresos)),1)]),t("div",fe,[e[21]||(e[21]=t("div",{class:"text-caption text-grey-7"},"TOTAL EGRESOS",-1)),t("div",he,i(r.currency(l.totalEgresos)),1)]),t("div",pe,[e[22]||(e[22]=t("div",{class:"text-caption text-grey-7"},"TOTAL CAJA (neto)",-1)),t("div",ye,i(r.currency(l.totalCaja)),1)]),t("div",xe,[a(f,{dense:"",outline:"","no-caps":"",icon:"visibility",label:"Ver detalle",onClick:e[4]||(e[4]=o=>r.openDetalle("ingresos","EFECTIVO"))})])]),_:1}),a(v),a(y,null,{default:n(()=>[t("div",ve,[t("div",Ve,[t("div",be,[e[23]||(e[23]=t("div",{class:"col text-subtitle1 text-weight-bold"},"Ingresos",-1)),t("div",Ce,i(r.currency(l.totalIngresos)),1)]),a(T,{flat:"",bordered:"",dense:""},{default:n(()=>[t("thead",null,[t("tr",Fe,[e[24]||(e[24]=t("th",{class:"text-left"},"Hora",-1)),e[25]||(e[25]=t("th",{class:"text-left"},"Descripción",-1)),e[26]||(e[26]=t("th",{class:"text-right"},"Monto (Bs.)",-1)),e[27]||(e[27]=t("th",{class:"text-left"},"Usuario",-1)),e[28]||(e[28]=t("th",{class:"text-left"},"Método",-1)),e[29]||(e[29]=t("th",{class:"text-left"},"Fuente",-1)),e[30]||(e[30]=t("th",{class:"text-left"},"Estado",-1)),s.$store.user?.role==="Administrador"?(d(),c("th",Ee,"Acciones")):x("",!0)])]),t("tbody",null,[t("tr",null,[e[32]||(e[32]=t("td",{class:"text-left"},"—",-1)),e[33]||(e[33]=t("td",{class:"text-left"},"Caja inicial del día",-1)),t("td",ke,i(r.currency(l.openingAmount)),1),e[34]||(e[34]=t("td",{class:"text-left"},"—",-1)),e[35]||(e[35]=t("td",{class:"text-left"},"—",-1)),e[36]||(e[36]=t("td",{class:"text-left"},"CAJA",-1)),t("td",_e,[a(Q,{dense:"",color:"blue-6","text-color":"white"},{default:n(()=>e[31]||(e[31]=[b(" Fijo ")])),_:1})])]),(d(!0),c(O,null,S(r.ingresosFlat,o=>(d(),c("tr",{key:`in-${o.key}`},[t("td",Ae,i(o.hora),1),t("td",Ie,i(o.descripcion),1),t("td",De,i(r.currency(o.monto)),1),t("td",Oe,i(o.usuario),1),t("td",Se,i(o.metodo||"—"),1),t("td",we,i(o.fuente),1),t("td",Be,[a(Q,{dense:"",color:o.estado==="Activo"?"green-6":"grey-6","text-color":"white"},{default:n(()=>[b(i(o.estado),1)]),_:2},1032,["color"])]),s.$store.user?.role==="Administrador"?(d(),c("td",Qe,[o.fuente==="INGRESO"&&o.estado==="Activo"?(d(),_(f,{key:0,dense:"",flat:"",color:"negative",icon:"block",label:"Anular",onClick:C=>r.anularIngreso(o.id),"no-caps":"",size:"10px"},null,8,["onClick"])):x("",!0)])):x("",!0)]))),128)),r.ingresosFlat.length?x("",!0):(d(),c("tr",Te,e[37]||(e[37]=[t("td",{colspan:"6",class:"text-center text-grey"},"Sin ingresos (solo caja inicial)",-1)])))])]),_:1})]),t("div",Ue,[t("div",Re,[e[38]||(e[38]=t("div",{class:"col text-subtitle1 text-weight-bold"},"Egresos",-1)),t("div",je,i(r.currency(l.totalEgresos)),1)]),a(T,{flat:"",bordered:"",dense:""},{default:n(()=>[t("thead",null,[t("tr",Ne,[e[39]||(e[39]=t("th",{class:"text-left"},"Hora",-1)),e[40]||(e[40]=t("th",{class:"text-left"},"Descripción",-1)),e[41]||(e[41]=t("th",{class:"text-right"},"Monto (Bs.)",-1)),e[42]||(e[42]=t("th",{class:"text-left"},"Usuario",-1)),e[43]||(e[43]=t("th",{class:"text-left"},"Método",-1)),e[44]||(e[44]=t("th",{class:"text-left"},"Fuente",-1)),e[45]||(e[45]=t("th",{class:"text-left"},"Estado",-1)),s.$store.user?.role==="Administrador"?(d(),c("th",qe,"Acciones")):x("",!0)])]),t("tbody",null,[(d(!0),c(O,null,S(r.egresosFlat,o=>(d(),c("tr",{key:`eg-${o.key}`},[t("td",Me,i(o.hora),1),t("td",Ge,i(o.descripcion),1),t("td",ze,i(r.currency(o.monto)),1),t("td",Ye,i(o.usuario),1),t("td",Pe,i(o.metodo||"EFECTIVO"),1),t("td",Le,i(o.fuente),1),t("td",We,[a(Q,{dense:"",color:(o.estado||"Activo")==="Activo"?"green-6":"grey-6","text-color":"white"},{default:n(()=>[b(i(o.estado||"Activo"),1)]),_:2},1032,["color"])]),s.$store.user?.role==="Administrador"?(d(),c("td",He,[o.fuente==="EGRESO"&&(o.estado||"Activo")==="Activo"?(d(),_(f,{key:0,dense:"",flat:"",color:"negative",icon:"block",label:"Anular",onClick:C=>r.anularEgreso(o.id),"no-caps":"",size:"10px"},null,8,["onClick"])):x("",!0)])):x("",!0)]))),128)),r.egresosFlat.length?x("",!0):(d(),c("tr",Ke,e[46]||(e[46]=[t("td",{colspan:"8",class:"text-center text-grey"},"Sin egresos",-1)])))])]),_:1})])])]),_:1}),a(te,{showing:l.loading},{default:n(()=>[a(ee,{size:"32px"})]),_:1},8,["showing"])]),_:1}),a(w,{modelValue:l.dlgIngreso,"onUpdate:modelValue":e[10]||(e[10]=o=>l.dlgIngreso=o),persistent:""},{default:n(()=>[a(A,{style:{"min-width":"420px"}},{default:n(()=>[a(y,{class:"text-h6"},{default:n(()=>e[47]||(e[47]=[b("Registrar ingreso")])),_:1}),a(v),a(y,{class:"q-gutter-sm"},{default:n(()=>[a(V,{modelValue:l.ingresoForm.descripcion,"onUpdate:modelValue":e[5]||(e[5]=o=>l.ingresoForm.descripcion=o),label:"Descripción",dense:"",outlined:""},null,8,["modelValue"]),a(I,{modelValue:l.ingresoForm.metodo,"onUpdate:modelValue":e[6]||(e[6]=o=>l.ingresoForm.metodo=o),val:"EFECTIVO",label:"EFECTIVO"},null,8,["modelValue"]),a(I,{modelValue:l.ingresoForm.metodo,"onUpdate:modelValue":e[7]||(e[7]=o=>l.ingresoForm.metodo=o),val:"QR",label:"QR"},null,8,["modelValue"]),a(V,{modelValue:l.ingresoForm.monto,"onUpdate:modelValue":e[8]||(e[8]=o=>l.ingresoForm.monto=o),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",label:"Monto (Bs.)",dense:"",outlined:""},null,8,["modelValue"]),a(V,{modelValue:l.ingresoForm.nota,"onUpdate:modelValue":e[9]||(e[9]=o=>l.ingresoForm.nota=o),type:"textarea",autogrow:"",label:"Nota (opcional)",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),a(v),a(j,{align:"right"},{default:n(()=>[B(a(f,{flat:"",label:"Cancelar",color:"grey"},null,512),[[U]]),a(f,{color:"positive",icon:"save",label:"Guardar",loading:l.loadingSave,onClick:r.guardarIngreso},null,8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(w,{modelValue:l.dlgEgreso,"onUpdate:modelValue":e[16]||(e[16]=o=>l.dlgEgreso=o),persistent:""},{default:n(()=>[a(A,{style:{"min-width":"420px"}},{default:n(()=>[a(y,{class:"text-h6"},{default:n(()=>e[48]||(e[48]=[b("Registrar egreso")])),_:1}),a(v),a(y,{class:"q-gutter-sm"},{default:n(()=>[a(V,{modelValue:l.egresoForm.descripcion,"onUpdate:modelValue":e[11]||(e[11]=o=>l.egresoForm.descripcion=o),label:"Descripción",dense:"",outlined:""},null,8,["modelValue"]),a(I,{modelValue:l.egresoForm.metodo,"onUpdate:modelValue":e[12]||(e[12]=o=>l.egresoForm.metodo=o),val:"EFECTIVO",label:"EFECTIVO"},null,8,["modelValue"]),a(I,{modelValue:l.egresoForm.metodo,"onUpdate:modelValue":e[13]||(e[13]=o=>l.egresoForm.metodo=o),val:"QR",label:"QR"},null,8,["modelValue"]),a(V,{modelValue:l.egresoForm.monto,"onUpdate:modelValue":e[14]||(e[14]=o=>l.egresoForm.monto=o),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",label:"Monto (Bs.)",dense:"",outlined:""},null,8,["modelValue"]),a(V,{modelValue:l.egresoForm.nota,"onUpdate:modelValue":e[15]||(e[15]=o=>l.egresoForm.nota=o),type:"textarea",autogrow:"",label:"Nota (opcional)",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),a(v),a(j,{align:"right"},{default:n(()=>[B(a(f,{flat:"",label:"Cancelar",color:"grey"},null,512),[[U]]),a(f,{color:"negative",icon:"save",label:"Guardar",loading:l.loadingSave,onClick:r.guardarEgreso},null,8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(w,{modelValue:l.dlgDetalle,"onUpdate:modelValue":e[19]||(e[19]=o=>l.dlgDetalle=o)},{default:n(()=>[a(A,{style:{"min-width":"720px","max-width":"90vw"}},{default:n(()=>[a(y,{class:"row items-center q-col-gutter-sm"},{default:n(()=>[t("div",Je,[a(M,{modelValue:l.detalleContext.tipo,"onUpdate:modelValue":e[17]||(e[17]=o=>l.detalleContext.tipo=o),spread:"","no-caps":"","toggle-color":"primary",options:[{label:"Ingresos",value:"ingresos"},{label:"Egresos",value:"egresos"}]},null,8,["modelValue"])]),t("div",Ze,[a(M,{modelValue:l.detalleContext.metodo,"onUpdate:modelValue":e[18]||(e[18]=o=>l.detalleContext.metodo=o),spread:"","no-caps":"","toggle-color":"primary",options:[{label:"EFECTIVO",value:"EFECTIVO"},{label:"QR",value:"QR"}]},null,8,["modelValue"])]),t("div",Xe,[B(a(f,{flat:"",dense:"",icon:"close"},null,512),[[U]])])]),_:1}),a(v),a(y,null,{default:n(()=>[a(T,{flat:"",bordered:"",dense:""},{default:n(()=>[e[50]||(e[50]=t("thead",null,[t("tr",null,[t("th",{class:"text-left"},"Hora"),t("th",{class:"text-right"},"Monto (Bs.)"),t("th",{class:"text-left"},"Descripción"),t("th",{class:"text-left"},"Usuario"),t("th",{class:"text-left"},"Fuente")])],-1)),t("tbody",null,[(d(!0),c(O,null,S(r.detalleFiltrado,o=>(d(),c("tr",{key:`dt-${o.key}`},[t("td",$e,i(o.hora),1),t("td",et,i(r.currency(o.monto)),1),t("td",tt,i(o.descripcion),1),t("td",ot,i(o.usuario),1),t("td",st,i(o.fuente),1)]))),128)),r.detalleFiltrado.length?x("",!0):(d(),c("tr",lt,e[49]||(e[49]=[t("td",{colspan:"5",class:"text-center text-grey"},"Sin movimientos",-1)])))])]),_:1})]),_:1}),a(v),a(y,{class:"text-right text-weight-medium"},{default:n(()=>[b(" Total: "+i(r.currency(r.detalleFiltrado.reduce((o,C)=>o+Number(C.monto||0),0))),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const xt=X(ae,[["render",at]]);export{xt as default};
