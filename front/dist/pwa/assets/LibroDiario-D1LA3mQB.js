import{j as W,av as H,k as F,aw as J,l as R,f,ax as Z,af as K,_ as X,c as _,o as d,w as n,a as r,Q as A,e as x,b as t,a6 as V,a1 as y,a7 as v,t as i,a2 as c,Z as b,a3 as O,a4 as S,a8 as $,h as w,ay as I,au as N,W as B}from"./index-Bxw-T3oo.js";import{Q as j}from"./QSelect-BmofJvLN.js";import{Q}from"./QChip-Cle8wZD0.js";import{Q as T}from"./QMarkupTable-M_kgdVcZ.js";import{Q as ee}from"./QInnerLoading-BeA8-oNx.js";import{Q as te}from"./QBtnGroup-DqfJ-NWu.js";import{Q as oe}from"./QPage-pNAokgfe.js";import{C as U}from"./ClosePopup-B6O2rn6I.js";import{h as q}from"./moment-C5S46NFB.js";import{s as se}from"./index-By2EPsF8.js";import"./format-CPPDzVyX.js";import"./selection-BC8ZVZG4.js";const M=W({name:"QBtnToggle",props:{...H,modelValue:{required:!0},options:{type:Array,required:!0,validator:s=>s.every(e=>("label"in e||"icon"in e||"slot"in e)&&"value"in e)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(s,{slots:e,emit:u}){const E=F(()=>s.options.find(g=>g.value===s.modelValue)!==void 0),l=F(()=>({type:"hidden",name:s.name,value:s.modelValue})),a=Z(l),o=F(()=>J(s)),C=F(()=>({rounded:s.rounded,dense:s.dense,...o.value})),G=F(()=>s.options.map((g,p)=>{const{attrs:D,value:k,slot:P,...m}=g;return{slot:P,props:{key:p,"aria-pressed":k===s.modelValue?"true":"false",...D,...m,...C.value,disable:s.disable===!0||m.disable===!0,color:k===s.modelValue?h(m,"toggleColor"):h(m,"color"),textColor:k===s.modelValue?h(m,"toggleTextColor"):h(m,"textColor"),noCaps:h(m,"noCaps")===!0,noWrap:h(m,"noWrap")===!0,size:h(m,"size"),padding:h(m,"padding"),ripple:h(m,"ripple"),stack:h(m,"stack")===!0,stretch:h(m,"stretch")===!0,onClick(L){z(k,g,L)}}}}));function z(g,p,D){s.readonly!==!0&&(s.modelValue===g?s.clearable===!0&&(u("update:modelValue",null,null),u("clear")):u("update:modelValue",g,p),u("click",D))}function h(g,p){return g[p]===void 0?s[p]:g[p]}function Y(){const g=G.value.map(p=>R(f,p.props,p.slot!==void 0?e[p.slot]:void 0));return s.name!==void 0&&s.disable!==!0&&E.value===!0&&a(g,"push"),K(e.default,g)}return()=>R(te,{class:"q-btn-toggle",...o.value,rounded:s.rounded,stretch:s.stretch,glossy:s.glossy,spread:s.spread},Y)}}),le={name:"LibroDiarioSimple",data(){return{fecha:q().format("YYYY-MM-DD"),openingAmount:0,ingresos:{ordenes:{total:0,items:[]},pagos_ordenes:{total:0,items:[]},pagos_prestamos:{total:0,items:[]},otros:{total:0,items:[]}},egresos:{prestamos:{total:0,items:[]},otros:{total:0,items:[]}},totalIngresos:0,totalEgresos:0,totalCaja:0,usuarios:[],usuario:"",loading:!1,loadingSave:!1,dlgIngreso:!1,ingresoForm:{fecha:"",descripcion:"",metodo:"EFECTIVO",monto:null,nota:""},dlgEgreso:!1,egresoForm:{fecha:"",descripcion:"",metodo:"EFECTIVO",monto:null,nota:""},dlgDetalle:!1,detalleContext:{tipo:"ingresos",metodo:"EFECTIVO"}}},computed:{ingresosFlat(){const s=(this.ingresos.ordenes.items||[]).map(l=>({...l,fuente:"ORDEN",key:`o-${l.id}`})),e=(this.ingresos.pagos_ordenes.items||[]).map(l=>({...l,fuente:"PAGO ORDEN",key:`po-${l.id}`})),u=(this.ingresos.pagos_prestamos.items||[]).map(l=>({...l,fuente:"PAGO PRÉSTAMO",key:`pp-${l.id}`})),E=(this.ingresos.otros.items||[]).map(l=>({...l,fuente:"INGRESO",key:`in-${l.id}`}));return[...s,...e,...u,...E]},egresosFlat(){const s=(this.egresos.prestamos.items||[]).map(u=>({...u,fuente:"PRÉSTAMO OTORGADO",key:`pr-${u.id}`})),e=(this.egresos.otros.items||[]).map(u=>({...u,fuente:"EGRESO",key:`ot-${u.id}`}));return[...s,...e]},detalleFiltrado(){return(this.detalleContext.tipo==="ingresos"?this.ingresosFlat:this.egresosFlat).filter(e=>(e.metodo||"EFECTIVO")===this.detalleContext.metodo&&(e.estado??"Activo")==="Activo")}},mounted(){this.egresoForm.fecha=this.fecha,this.ingresoForm.fecha=this.fecha,this.fetchUsuarios(),this.fetchDiario()},methods:{store:se,currency(s){return`${Number(s||0).toFixed(2)} Bs.`},async fetchUsuarios(){try{const{data:s}=await this.$axios.get("users");this.usuarios=s||[]}catch{this.usuarios=[]}},onChangeFecha(){this.egresoForm.fecha=this.fecha,this.ingresoForm.fecha=this.fecha,this.fetchDiario()},async fetchDiario(){this.loading=!0;try{const{data:s}=await this.$axios.get("daily-cash",{params:{date:this.fecha,usuario:this.usuario,metodo_pago:this.ingresoForm.metodo}});this.openingAmount=Number(s.daily_cash?.opening_amount||0),this.openingAmount||await this.tryPreloadYesterday(),this.ingresos={ordenes:s.ingresos?.ordenes||{total:0,items:[]},pagos_ordenes:s.ingresos?.pagos_ordenes||{total:0,items:[]},pagos_prestamos:s.ingresos?.pagos_prestamos||{total:0,items:[]},otros:s.ingresos?.otros||{total:0,items:[]}},this.egresos={prestamos:s.egresos?.prestamos||{total:0,items:[]},otros:s.egresos?.otros||{total:0,items:[]}},this.totalIngresos=Number(s.total_ingresos||0),this.totalEgresos=Number(s.total_egresos||0),this.totalCaja=Number(s.total_caja||this.totalIngresos-this.totalEgresos)}catch(s){this.$alert?.error?.(s.response?.data?.message||"Error al cargar el libro diario")}finally{this.loading=!1}},async tryPreloadYesterday(){try{const s=q(this.fecha).subtract(1,"day").format("YYYY-MM-DD"),{data:e}=await this.$axios.get("daily-cash",{params:{date:s}}),u=Number(e.daily_cash?.opening_amount||0);u>0&&(this.openingAmount=u)}catch{}},async guardarCaja(){this.loadingSave=!0;try{await this.$axios.post("daily-cash",{date:this.fecha,opening_amount:Number(this.openingAmount||0)}),this.$alert?.success?.("Caja inicial guardada"),this.fetchDiario()}catch(s){this.$alert?.error?.(s.response?.data?.message||"Error al guardar caja")}finally{this.loadingSave=!1}},openIngresoDialog(){this.ingresoForm={fecha:this.fecha,descripcion:"",metodo:"EFECTIVO",monto:null,nota:""},this.dlgIngreso=!0},async guardarIngreso(){try{this.loadingSave=!0,await this.$axios.post("ingresos",this.ingresoForm),this.$alert?.success?.("Ingreso registrado"),this.dlgIngreso=!1,this.fetchDiario()}catch(s){this.$alert?.error?.(s.response?.data?.message||"Error al registrar ingreso")}finally{this.loadingSave=!1}},openEgresoDialog(){this.egresoForm={fecha:this.fecha,descripcion:"",metodo:"EFECTIVO",monto:null,nota:""},this.dlgEgreso=!0},async guardarEgreso(){try{this.loadingSave=!0,await this.$axios.post("egresos",this.egresoForm),this.$alert?.success?.("Egreso registrado"),this.dlgEgreso=!1,this.fetchDiario()}catch(s){this.$alert?.error?.(s.response?.data?.message||"Error al registrar egreso")}finally{this.loadingSave=!1}},anularIngreso(s){this.$q.dialog({title:"Confirmar",message:"¿Seguro que deseas anular este ingreso?",cancel:!0,persistent:!0}).onOk(async()=>{try{this.loading=!0,await this.$axios.post(`ingresos/${s}/anular`),this.$alert?.success?.("Ingreso anulado"),this.fetchDiario()}catch(e){this.$alert?.error?.(e.response?.data?.message||"No se pudo anular")}finally{this.loading=!1}})},async anularEgreso(s){this.$q.dialog({title:"Confirmar",message:"¿Seguro que deseas anular este egreso?",cancel:!0,persistent:!0}).onOk(async()=>{try{this.loading=!0,await this.$axios.post(`egresos/${s}/anular`),this.$alert?.success?.("Egreso anulado"),this.fetchDiario()}catch(e){this.$alert?.error?.(e.response?.data?.message||"No se pudo anular")}finally{this.loading=!1}})},openDetalle(s,e){this.detalleContext={tipo:s,metodo:e},this.dlgDetalle=!0}}},re={class:"col-12 col-md-2"},ae={class:"col-12 col-md-2"},ne={class:"col-12 col-md-2"},ie={class:"col-12 col-md-2 flex items-center justify-end"},de={class:"col-12 col-md-3"},ue={class:"text-h6"},ge={class:"col-12 col-md-3"},me={class:"text-h6"},ce={class:"col-12 col-md-3"},fe={class:"text-h6"},he={class:"col-12 col-md-3 flex items-center justify-end"},pe={class:"row q-col-gutter-md"},xe={class:"col-12 col-md-6"},ye={class:"row items-center q-mb-xs"},ve={class:"col-auto text-weight-medium"},Ve={class:"bg-green-2"},be={key:0,class:"text-right"},Ce={class:"text-right"},Fe={class:"text-left"},Ee={class:"text-left"},ke={class:"text-left"},_e={class:"text-right"},Ae={class:"text-left"},Ie={class:"text-left"},De={class:"text-left"},Oe={class:"text-left"},Se={key:0,class:"text-right"},we={key:0},Be={class:"col-12 col-md-6"},Qe={class:"row items-center q-mb-xs"},Te={class:"col-auto text-weight-medium"},Ue={class:"bg-red-2"},Re={key:0,class:"text-right"},Ne={class:"text-left"},je={class:"text-left"},qe={class:"text-right"},Me={class:"text-left"},Ge={class:"text-left"},ze={class:"text-left"},Ye={class:"text-left"},Pe={key:0,class:"text-right"},Le={key:0},We={class:"col-12 col-md-6"},He={class:"col-12 col-md-4"},Je={class:"col-12 col-md-2 flex justify-end"},Ze={class:"text-left"},Ke={class:"text-right"},Xe={class:"text-left"},$e={class:"text-left"},et={class:"text-left"},tt={key:0};function ot(s,e,u,E,l,a){return d(),_(oe,{class:"q-pa-sm bg-grey-2"},{default:n(()=>[r(A,{flat:"",bordered:""},{default:n(()=>[r(x,{class:"row items-center q-col-gutter-sm"},{default:n(()=>[t("div",re,[r(V,{type:"date",modelValue:l.fecha,"onUpdate:modelValue":[e[0]||(e[0]=o=>l.fecha=o),a.onChangeFecha],label:"Fecha",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),e[19]||(e[19]=t("div",{class:"col-12 col-md-2"},null,-1)),e[20]||(e[20]=t("div",{class:"col-12 col-md-2"},null,-1)),t("div",ae,[s.$store.user?.role==="Administrador"?(d(),_(j,{key:0,modelValue:l.usuario,"onUpdate:modelValue":e[1]||(e[1]=o=>l.usuario=o),options:l.usuarios.map(o=>o.username),label:"Usuario",dense:"",outlined:"",clearable:""},null,8,["modelValue","options"])):y("",!0)]),t("div",ne,[r(j,{modelValue:l.ingresoForm.metodo,"onUpdate:modelValue":e[2]||(e[2]=o=>l.ingresoForm.metodo=o),options:["EFECTIVO","QR"],label:"Método pago",dense:"",outlined:"",clearable:""},null,8,["modelValue"])]),t("div",ie,[r(f,{size:"12px",dense:"",color:"grey",flat:"",icon:"refresh",label:"Actualizar","no-caps":"",loading:l.loading,onClick:a.fetchDiario},null,8,["loading","onClick"]),r(v,{vertical:"",class:"q-mx-sm"}),r(f,{size:"12px",dense:"",color:"positive",icon:"add_circle",label:"Registrar ingreso","no-caps":"",class:"q-mr-sm",onClick:a.openIngresoDialog},null,8,["onClick"]),r(f,{size:"12px",dense:"",color:"negative",icon:"remove_circle",label:"Registrar egreso","no-caps":"",onClick:a.openEgresoDialog},null,8,["onClick"])])]),_:1}),r(v),r(x,{class:"row q-col-gutter-sm"},{default:n(()=>[t("div",de,[e[21]||(e[21]=t("div",{class:"text-caption text-grey-7"},"TOTAL INGRESOS (incluye caja)",-1)),t("div",ue,i(a.currency(l.totalIngresos)),1)]),t("div",ge,[e[22]||(e[22]=t("div",{class:"text-caption text-grey-7"},"TOTAL EGRESOS",-1)),t("div",me,i(a.currency(l.totalEgresos)),1)]),t("div",ce,[e[23]||(e[23]=t("div",{class:"text-caption text-grey-7"},"TOTAL CAJA (neto)",-1)),t("div",fe,i(a.currency(l.totalCaja)),1)]),t("div",he,[r(f,{dense:"",outline:"","no-caps":"",icon:"visibility",label:"Ver detalle",onClick:e[3]||(e[3]=o=>a.openDetalle("ingresos","EFECTIVO"))})])]),_:1}),r(v),r(x,null,{default:n(()=>[t("div",pe,[t("div",xe,[t("div",ye,[e[24]||(e[24]=t("div",{class:"col text-subtitle1 text-weight-bold"},"Ingresos",-1)),t("div",ve,i(a.currency(l.totalIngresos)),1)]),r(T,{flat:"",bordered:"",dense:""},{default:n(()=>[t("thead",null,[t("tr",Ve,[e[25]||(e[25]=t("th",{class:"text-left"},"Hora",-1)),e[26]||(e[26]=t("th",{class:"text-left"},"Descripción",-1)),e[27]||(e[27]=t("th",{class:"text-right"},"Monto (Bs.)",-1)),e[28]||(e[28]=t("th",{class:"text-left"},"Usuario",-1)),e[29]||(e[29]=t("th",{class:"text-left"},"Método",-1)),e[30]||(e[30]=t("th",{class:"text-left"},"Fuente",-1)),e[31]||(e[31]=t("th",{class:"text-left"},"Estado",-1)),s.$store.user?.role==="Administrador"?(d(),c("th",be,"Acciones")):y("",!0)])]),t("tbody",null,[t("tr",null,[e[33]||(e[33]=t("td",{class:"text-left"},"—",-1)),e[34]||(e[34]=t("td",{class:"text-left"},"Caja inicial del día",-1)),t("td",Ce,i(a.currency(l.openingAmount)),1),e[35]||(e[35]=t("td",{class:"text-left"},"—",-1)),e[36]||(e[36]=t("td",{class:"text-left"},"—",-1)),e[37]||(e[37]=t("td",{class:"text-left"},"CAJA",-1)),t("td",Fe,[r(Q,{dense:"",color:"blue-6","text-color":"white"},{default:n(()=>e[32]||(e[32]=[b(" Fijo ")])),_:1})])]),(d(!0),c(O,null,S(a.ingresosFlat,o=>(d(),c("tr",{key:`in-${o.key}`},[t("td",Ee,i(o.hora),1),t("td",ke,i(o.descripcion),1),t("td",_e,i(a.currency(o.monto)),1),t("td",Ae,i(o.usuario),1),t("td",Ie,i(o.metodo||"—"),1),t("td",De,i(o.fuente),1),t("td",Oe,[r(Q,{dense:"",color:o.estado==="Activo"?"green-6":"grey-6","text-color":"white"},{default:n(()=>[b(i(o.estado),1)]),_:2},1032,["color"])]),s.$store.user?.role==="Administrador"?(d(),c("td",Se,[o.fuente==="INGRESO"&&o.estado==="Activo"?(d(),_(f,{key:0,dense:"",flat:"",color:"negative",icon:"block",label:"Anular",onClick:C=>a.anularIngreso(o.id),"no-caps":"",size:"10px"},null,8,["onClick"])):y("",!0)])):y("",!0)]))),128)),a.ingresosFlat.length?y("",!0):(d(),c("tr",we,e[38]||(e[38]=[t("td",{colspan:"6",class:"text-center text-grey"},"Sin ingresos (solo caja inicial)",-1)])))])]),_:1})]),t("div",Be,[t("div",Qe,[e[39]||(e[39]=t("div",{class:"col text-subtitle1 text-weight-bold"},"Egresos",-1)),t("div",Te,i(a.currency(l.totalEgresos)),1)]),r(T,{flat:"",bordered:"",dense:""},{default:n(()=>[t("thead",null,[t("tr",Ue,[e[40]||(e[40]=t("th",{class:"text-left"},"Hora",-1)),e[41]||(e[41]=t("th",{class:"text-left"},"Descripción",-1)),e[42]||(e[42]=t("th",{class:"text-right"},"Monto (Bs.)",-1)),e[43]||(e[43]=t("th",{class:"text-left"},"Usuario",-1)),e[44]||(e[44]=t("th",{class:"text-left"},"Método",-1)),e[45]||(e[45]=t("th",{class:"text-left"},"Fuente",-1)),e[46]||(e[46]=t("th",{class:"text-left"},"Estado",-1)),s.$store.user?.role==="Administrador"?(d(),c("th",Re,"Acciones")):y("",!0)])]),t("tbody",null,[(d(!0),c(O,null,S(a.egresosFlat,o=>(d(),c("tr",{key:`eg-${o.key}`},[t("td",Ne,i(o.hora),1),t("td",je,i(o.descripcion),1),t("td",qe,i(a.currency(o.monto)),1),t("td",Me,i(o.usuario),1),t("td",Ge,i(o.metodo||"EFECTIVO"),1),t("td",ze,i(o.fuente),1),t("td",Ye,[r(Q,{dense:"",color:(o.estado||"Activo")==="Activo"?"green-6":"grey-6","text-color":"white"},{default:n(()=>[b(i(o.estado||"Activo"),1)]),_:2},1032,["color"])]),s.$store.user?.role==="Administrador"?(d(),c("td",Pe,[o.fuente==="EGRESO"&&(o.estado||"Activo")==="Activo"?(d(),_(f,{key:0,dense:"",flat:"",color:"negative",icon:"block",label:"Anular",onClick:C=>a.anularEgreso(o.id),"no-caps":"",size:"10px"},null,8,["onClick"])):y("",!0)])):y("",!0)]))),128)),a.egresosFlat.length?y("",!0):(d(),c("tr",Le,e[47]||(e[47]=[t("td",{colspan:"8",class:"text-center text-grey"},"Sin egresos",-1)])))])]),_:1})])])]),_:1}),r(ee,{showing:l.loading},{default:n(()=>[r($,{size:"32px"})]),_:1},8,["showing"])]),_:1}),r(w,{modelValue:l.dlgIngreso,"onUpdate:modelValue":e[9]||(e[9]=o=>l.dlgIngreso=o),persistent:""},{default:n(()=>[r(A,{style:{"min-width":"420px"}},{default:n(()=>[r(x,{class:"text-h6"},{default:n(()=>e[48]||(e[48]=[b("Registrar ingreso")])),_:1}),r(v),r(x,{class:"q-gutter-sm"},{default:n(()=>[r(V,{modelValue:l.ingresoForm.descripcion,"onUpdate:modelValue":e[4]||(e[4]=o=>l.ingresoForm.descripcion=o),label:"Descripción",dense:"",outlined:""},null,8,["modelValue"]),r(I,{modelValue:l.ingresoForm.metodo,"onUpdate:modelValue":e[5]||(e[5]=o=>l.ingresoForm.metodo=o),val:"EFECTIVO",label:"EFECTIVO"},null,8,["modelValue"]),r(I,{modelValue:l.ingresoForm.metodo,"onUpdate:modelValue":e[6]||(e[6]=o=>l.ingresoForm.metodo=o),val:"QR",label:"QR"},null,8,["modelValue"]),r(V,{modelValue:l.ingresoForm.monto,"onUpdate:modelValue":e[7]||(e[7]=o=>l.ingresoForm.monto=o),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",label:"Monto (Bs.)",dense:"",outlined:""},null,8,["modelValue"]),r(V,{modelValue:l.ingresoForm.nota,"onUpdate:modelValue":e[8]||(e[8]=o=>l.ingresoForm.nota=o),type:"textarea",autogrow:"",label:"Nota (opcional)",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),r(v),r(N,{align:"right"},{default:n(()=>[B(r(f,{flat:"",label:"Cancelar",color:"grey"},null,512),[[U]]),r(f,{color:"positive",icon:"save",label:"Guardar",loading:l.loadingSave,onClick:a.guardarIngreso},null,8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(w,{modelValue:l.dlgEgreso,"onUpdate:modelValue":e[15]||(e[15]=o=>l.dlgEgreso=o),persistent:""},{default:n(()=>[r(A,{style:{"min-width":"420px"}},{default:n(()=>[r(x,{class:"text-h6"},{default:n(()=>e[49]||(e[49]=[b("Registrar egreso")])),_:1}),r(v),r(x,{class:"q-gutter-sm"},{default:n(()=>[r(V,{modelValue:l.egresoForm.descripcion,"onUpdate:modelValue":e[10]||(e[10]=o=>l.egresoForm.descripcion=o),label:"Descripción",dense:"",outlined:""},null,8,["modelValue"]),r(I,{modelValue:l.egresoForm.metodo,"onUpdate:modelValue":e[11]||(e[11]=o=>l.egresoForm.metodo=o),val:"EFECTIVO",label:"EFECTIVO"},null,8,["modelValue"]),r(I,{modelValue:l.egresoForm.metodo,"onUpdate:modelValue":e[12]||(e[12]=o=>l.egresoForm.metodo=o),val:"QR",label:"QR"},null,8,["modelValue"]),r(V,{modelValue:l.egresoForm.monto,"onUpdate:modelValue":e[13]||(e[13]=o=>l.egresoForm.monto=o),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",label:"Monto (Bs.)",dense:"",outlined:""},null,8,["modelValue"]),r(V,{modelValue:l.egresoForm.nota,"onUpdate:modelValue":e[14]||(e[14]=o=>l.egresoForm.nota=o),type:"textarea",autogrow:"",label:"Nota (opcional)",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),r(v),r(N,{align:"right"},{default:n(()=>[B(r(f,{flat:"",label:"Cancelar",color:"grey"},null,512),[[U]]),r(f,{color:"negative",icon:"save",label:"Guardar",loading:l.loadingSave,onClick:a.guardarEgreso},null,8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(w,{modelValue:l.dlgDetalle,"onUpdate:modelValue":e[18]||(e[18]=o=>l.dlgDetalle=o)},{default:n(()=>[r(A,{style:{"min-width":"720px","max-width":"90vw"}},{default:n(()=>[r(x,{class:"row items-center q-col-gutter-sm"},{default:n(()=>[t("div",We,[r(M,{modelValue:l.detalleContext.tipo,"onUpdate:modelValue":e[16]||(e[16]=o=>l.detalleContext.tipo=o),spread:"","no-caps":"","toggle-color":"primary",options:[{label:"Ingresos",value:"ingresos"},{label:"Egresos",value:"egresos"}]},null,8,["modelValue"])]),t("div",He,[r(M,{modelValue:l.detalleContext.metodo,"onUpdate:modelValue":e[17]||(e[17]=o=>l.detalleContext.metodo=o),spread:"","no-caps":"","toggle-color":"primary",options:[{label:"EFECTIVO",value:"EFECTIVO"},{label:"QR",value:"QR"}]},null,8,["modelValue"])]),t("div",Je,[B(r(f,{flat:"",dense:"",icon:"close"},null,512),[[U]])])]),_:1}),r(v),r(x,null,{default:n(()=>[r(T,{flat:"",bordered:"",dense:""},{default:n(()=>[e[51]||(e[51]=t("thead",null,[t("tr",null,[t("th",{class:"text-left"},"Hora"),t("th",{class:"text-right"},"Monto (Bs.)"),t("th",{class:"text-left"},"Descripción"),t("th",{class:"text-left"},"Usuario"),t("th",{class:"text-left"},"Fuente")])],-1)),t("tbody",null,[(d(!0),c(O,null,S(a.detalleFiltrado,o=>(d(),c("tr",{key:`dt-${o.key}`},[t("td",Ze,i(o.hora),1),t("td",Ke,i(a.currency(o.monto)),1),t("td",Xe,i(o.descripcion),1),t("td",$e,i(o.usuario),1),t("td",et,i(o.fuente),1)]))),128)),a.detalleFiltrado.length?y("",!0):(d(),c("tr",tt,e[50]||(e[50]=[t("td",{colspan:"5",class:"text-center text-grey"},"Sin movimientos",-1)])))])]),_:1})]),_:1}),r(v),r(x,{class:"text-right text-weight-medium"},{default:n(()=>[b(" Total: "+i(a.currency(a.detalleFiltrado.reduce((o,C)=>o+Number(C.monto||0),0))),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const ht=X(le,[["render",ot]]);export{ht as default};
